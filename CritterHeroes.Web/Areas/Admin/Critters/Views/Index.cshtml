@model CritterHeroes.Web.Areas.Admin.Critters.Models.CrittersModel

@{
    ViewBag.Title = "Critters";
}

<script id="template" type="text/x-handlebars">
    {{#each critters}}
    <tr>
        <td>
            {{#if pictureFilename}}
            <img height="50" src="@Url.Picture()/{{id}}/{{pictureFilename}}" />
            {{else}}
            &nbsp;
            {{/if}}
        </td>
        <td>{{name}}</td>
        <td>{{sexName}}</td>
        <td>{{status}}</td>
        <td>{{breed}}</td>
        <td>{{fosterName}}</td>
        <td><a href="http://www.fflah.org/animals/detail?AnimalID={{siteID}}" target="_blank">View on site</a></td>
    </tr>
    {{else}}
    <tr>
        <td colspan="7">No critters found.</td>
    </tr>
    {{/each}}
</script>

@section scripts{
    <script type="text/javascript">
        (function (cheroes) {
            cheroes.query = @JavascriptConvert.SerializeObject(Model.Query);
        })(this.cheroes = this.cheroes || {});
    </script>
    <script type="text/javascript" src="@Url.Content(VersionedStatics.UrlFor("handlebars.js"))"></script>
    <script type="text/javascript" src="@Url.Content(VersionedStatics.UrlFor("ch.critters-list.js"))"></script>
}

<h2>Critters</h2>

<div class="filters-container">
    <section>Filters</section>
    <section>
        <label for="status-id">Status</label>
        <select id="status-id" data-filter="statusid">
            <option value="">Any status</option>
            @foreach (var item in Model.StatusItems)
            {
                <option value="@item.Value" selected="@item.Selected">@item.Text</option>
            }
        </select>
    </section>
</div>

<table id="critters-container" class="table table-striped table-hover table-condensed">
    <thead>
        <tr>
            <th>&nbsp;</th>
            <th>Name</th>
            <th>Sex</th>
            <th>Status</th>
            <th>Breed</th>
            <th>Foster</th>
            <th>&nbsp;</th>
        </tr>
    </thead>
    <tbody data-url="@Url.CritterListAction()" data-picture-url="@Url.Picture()"></tbody>
</table>

<ul class="paging-container"></ul>
