@model CH.Website.Models.Account.ForgotPasswordModel

@{
    ViewBag.Title = "Forgot Password";
}

@section scripts{

    @Scripts.Render("~/bundles/chbusyindicator")

    <script type="text/javascript">

        var showMessage = '@(Model.ShowMessage ? "Y" : "N")';
        if (showMessage === 'Y') {
            $('#success-message').modal();
        }

        (function (cheroes, $) {
            $('#submit').busyIndicator({ message: 'Resetting password...' });
        }(this.cheroes = this.cheroes || {}, jQuery));

    </script>
}

<div id="success-message" class="modal fade" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <p>Instructions for resetting your password have been emailed to you. Please check your email and follow the provided instructions to complete resetting your password. If you can't find the email, please check your spam folder.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-info" data-dismiss="modal">Try Again</button>
                <a href="@Url.AccountAction(x => x.Login(null))" class="btn btn-primary">Continue</a>
            </div>
        </div>
    </div>
</div>

<p>Please enter either your email address or your username. Instructions for resetting your password will be emailed to you.</p>

@using (Html.FluentHtml().Form().Class("form-horizontal").Begin())
{
    @Html.AntiForgeryToken()

    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            @Html.ValidationSummary(excludePropertyErrors: true)
        </div>
    </div>

    <div class="form-group">
        <label for="email" class="col-sm-2 control-label">Email address:</label>
        <div class="col-sm-10">
            <input type="email" id="emailaddress" name="emailaddress" autofocus="autofocus" placeholder="Email address" class="form-control" />
            @Html.ValidationMessage("email")
        </div>
    </div>

    <div class="form-group">
        <label for="username" class="col-sm-2 control-label">Username:</label>
        <div class="col-sm-10">
            <input type="text" id="username" name="username" placeholder="Username" class="form-control" />
            @Html.ValidationMessage("username")
        </div>
    </div>

    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <span><input type="submit" id="submit" class="btn btn-primary btn-sm" value="Reset Password" /></span>
            <a href="@Url.AccountAction(x => x.Login(null))" class="btn btn-primary btn-sm">Cancel</a>
        </div>
    </div>
}
