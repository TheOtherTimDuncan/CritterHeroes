@model CH.Website.Models.Account.ResetPasswordModel

@{
    ViewBag.Title = "ResetPassword";
}

@section scripts{

    @Scripts.Render("~/bundles/chbusyindicator")

    <script type="text/javascript">

        var showMessage = '@(Model.ShowMessage ? "Y" : "N")';
        if (showMessage === 'Y') {
            $('#success-message').modal();
        }

        (function (cheroes, $) {
            $('#submit').busyIndicator({ message: 'Resetting password...' });
        }(this.cheroes = this.cheroes || {}, jQuery));

    </script>
}

<div id="success-message" class="modal fade" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <p>Your password has been successfully reset.</p>
            </div>
            <div class="modal-footer">
                <a href="@Url.HomeAction(x => x.Index())" class="btn btn-primary">Continue</a>
            </div>
        </div>
    </div>
</div>

<p>Please enter your username and a new password to complete resetting your password.</p>

@using (Html.FluentHtml().Form().Class("form-horizontal").Begin())
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.Code)

    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            @Html.ValidationSummary(excludePropertyErrors: true)
        </div>
    </div>

    <div class="form-group">
        @Html.FluentHtml().Label().For(x => x.Username).Class("col-sm-2 control-label")
        <div class="col-sm-10">
            @Html.FluentHtml().InputText().For(x => x.Username).AutoFocus().Placeholder("Username").Class("form-control")
            @Html.ValidationMessageFor(x => x.Username)
        </div>
    </div>

    <div class="form-group">
        @Html.FluentHtml().Label().For(x => x.Password).Class("col-sm-2 control-label")
        <div class="col-sm-10">
            @Html.FluentHtml().InputPassword().For(x => x.Password).Placeholder("Password").Class("form-control")
            @Html.ValidationMessageFor(x => x.Password)
        </div>
    </div>

    <div class="form-group">
        @Html.FluentHtml().Label().For(x => x.Username).Class("col-sm-2 control-label")
        <div class="col-sm-10">
            @Html.FluentHtml().InputPassword().For(x => x.ConfirmPassword).Placeholder("Confirm Password").Class("form-control")
            @Html.ValidationMessageFor(x => x.ConfirmPassword)
        </div>
    </div>

    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <span><input type="submit" id="submit" class="btn btn-primary btn-sm" value="Reset Password" /></span>
            <a href="@Url.AccountAction(x => x.Login(null))" class="btn btn-primary btn-sm">Cancel</a>
        </div>
    </div>
}